{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% endblock %} | CuidaMe</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
    {% block extra_css %}{% endblock %}
</head>
<body>
    <header class="main-header">
        <div class="logo-title">
            <a href="{% url 'home' %}" style="text-decoration: none;"><img src="{% static 'images/logo.png' %}" class="logo" alt="Logo Cu√≠dame">
            <span>Cu√≠dame</span></a>
        </div>
        <nav class="main-nav">
            {% if user.is_authenticated and user.is_paciente %}
                <a href="{% url 'paciente_perfil' %}" class="btn-primary" style="text-decoration: none;">Perfil</a>
                <a href="{% url 'dashboard_paciente' %}" class="btn-primary" style="text-decoration: none;">Dashboard</a>
                <a href="{% url 'paciente_citas' %}" class="btn-primary" style="text-decoration: none;">Citas</a>
                <a href="{% url 'paciente_metricas' %}" class="btn-primary" style="text-decoration: none;">M√©tricas</a>
                <form action="{% url 'logout' %}" method="post">
                {% csrf_token %}
                <button type="submit" class="btn-secondary">Cerrar Sesi√≥n</button>
                </form>
            {% elif user.is_authenticated and user.is_medico %}
                <a href="{% url 'medico_perfil' %}" class="btn-primary" style="text-decoration: none;">Perfil</a>
                <a href="{% url 'medico_citas' %}" class="btn-primary" style="text-decoration: none;">Citas</a> 
                <form action="{% url 'logout' %}" method="post">
                    {% csrf_token %}
                    <button type="submit" class="btn-secondary">Cerrar Sesi√≥n</button>
                </form>
            {% else %}
                <button id="loginBtn" class="btn-secondary">Iniciar Sesi√≥n</button>
                
                <button id="registerBtn" class="btn-primary">Registrarse</button>
            {% endif %}
        </nav>
        <div class="modal" id="login-modal">
        <div class="modal-content">
            <span class="close-btn" id="close-login-modal">&times;</span>
            <form id="login-form" method="post" action="{% url 'login' %}">
                {% csrf_token %}
                <h2>Iniciar Sesi√≥n</h2>
                <div class="form-group">
                    <label for="email">Nombre de Usuario:</label>
                    <input type="text" id="email" name="username" required placeholder="Tu nombre de usuario">
                </div>
                <div class="form-group">
                    <label for="password">Contrase√±a:</label>
                    <input type="password" id="password" name="password" required placeholder="Tu contrase√±a">
                </div>
                <button id="login-modal" type="submit" class="btn-primary">Entrar</button>
                <p class="login-info">¬øNo tienes cuenta? Reg√≠strate <a href="#" id="link-registro-modal">aqu√≠</a>.</p>
            </form>
        </div>
    </div>
    
    <div class="modal" id="register-modal">
        <div class="modal-content">
            <span class="close-btn" id="close-register-modal">&times;</span>
            <form id="registro-form" method="post" action="{% url 'register' %}">
                {% csrf_token %}
                <h2 id="registro-titulo">Registro</h2>
                <input type="hidden" id="registro-tipo" value="paciente">
                <div class="form-group">
                    <label for="reg-username">Nombre de usuario:</label>
                    <input type="text" id="reg-username" name="username" required>
                </div>
                <div class="form-group">
                    <label for="reg-nombre">Nombre:</label>
                    <input type="text" id="reg-nombre" name="first_name" required>
                </div>
                <div class="form-group">
                    <label for="reg-apellido">Apellido:</label>
                    <input type="text" id="reg-apellido" name="last_name" required>
                </div>
                <div class="form-group">
                    <label for="reg-email">Correo Electr√≥nico:</label>
                    <input type="email" id="reg-email" required>
                </div>
                <div class="form-group">
                    <label for="reg-password">Contrase√±a:</label>
                    <input type="password" id="reg-password" name="password" required placeholder="M√≠nimo 6 caracteres">
                </div>
                
                <div id="campo-especialidad" class="form-group" style="display:none;">
                    <label for="reg-especialidad">Especialidad (S√≥lo M√©dicos):</label>
                    <input type="text" id="reg-especialidad" name="especialidad" placeholder="Ej: Cardiolog√≠a">
                </div>
                
                <button type="submit" class="btn-primary">Crear Cuenta</button>
            </form>
        </div>
    </div>
    </header>
    {% block content %}{% endblock %}


    <footer>
        <button id="chatbot-btn">üí¨</button>
        <div id="chatbot-window">
            <div id="chatbot-header">ü§ñ Asistente Cu√≠dame</div>
            <div id="chatbot-messages"></div>
            <div id="chatbot-input">
                <input type="text" id="user-input" placeholder="Pregunta sobre citas o historial m√©dico...">
                <button id="send-btn">Enviar</button>
            </div>
        </div>
    </footer>

    <script src="{% static 'js/chatbot.js' %}"></script>
    <script src="{% static 'js/script.js' %}"></script>
</body>
</html>